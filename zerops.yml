zerops:
  - setup: app
    build:
      base: nodejs@20
      envVariables:
        DATABASE_URL: ${db_connectionString}
      buildCommands:
        - npm i
        - npm run build
      deployFiles:
        - .next
        - package.json
        - node_modules
        - public
      cache:
        - node_modules
        - package-lock.json
    run:
      base: nodejs@20
      envVariables:
        DATABASE_URL: ${db_connectionString}
      ports:
        - port: 3000
          httpSupport: true
      start: npm start
